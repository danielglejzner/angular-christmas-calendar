<div class="title">
  <img
    ngSrc="./../../../assets/content/images/angular_wordmark_gradient.png"
    width="350"
    height="109"
    priority="true"
    alt="Angular Wordmark Gradient"
  />
  <h1>Christmas Calendar</h1>
</div>

@for (card of cards; track $index) {
  <div
    class="card day-{{ card.day }}"
    (click)="tryToOpenDialog(card)"
    [shakeWhenDisabled]="!card.canReveal && !card.revealed"
    [class.pulse]="card.canReveal && !card.revealed"
  >
    <label>
      <input
        type="checkbox"
        [checked]="card.revealed"
        [disabled]="!card.canReveal"
        (change)="card.revealed = !card.revealed"
      />

      @if (!card.revealed || (card.revealed && card.canReveal)) {
        <div class="door" [class.door--can-reveal]="card.canReveal">
          <div class="front">{{ card.day }}</div>
          <div class="back"></div>
        </div>
      }

      @defer (on viewport) {
        <div class="inside">
          @if (card.revealed || card.canReveal) {
            <ng-template [xmasCalendarCardFactory] [type]="card.day"></ng-template>
          }
        </div>
      } @placeholder {<span></span>}

      @if (card.content?.author) {
        <div class="title-container">
          @if (!card.content?.author?.twitterHandle) {
            <p>{{ card.content?.author?.name }}</p>
          } @else {
            <a
              [href]="card.content?.author?.twitterHandle! | twitterUrl"
              target="_blank"
              title="Link to author's twitter account"
            >
              {{ card.content?.author?.name }}
            </a>
          }
        </div>
      }
    </label>
  </div>
}

<div class="card space">
  <a href="https://twitter.com/i/communities/1726237719762714636">
    <img
      ngSrc="./../../../assets/content/images/angular-space.png"
      width="100"
      height="100"
      alt="Angular Space"
    />
  </a>
</div>

<div class="year">
  <h1>2023</h1>
</div>
